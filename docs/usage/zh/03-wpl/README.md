# WPL è§„åˆ™è¯­è¨€

WPL (Warp Processing Language) æ˜¯ Warp Parse è§£æå­ç³»ç»Ÿï¼ˆwarp-parseï¼‰ä½¿ç”¨çš„è§„åˆ™è¯­è¨€ï¼Œç”¨äºæè¿°å­—æ®µæŠ½å–ã€åè®®è§£æä¸ç®€å•åˆ¤å®šé€»è¾‘ã€‚

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### æŒ‰å­¦ä¹ è·¯å¾„

```
ğŸ†• æ–°æ‰‹å…¥é—¨
   â†“
01-quickstart.md â”€â”€â”€â”€â†’ 5åˆ†é’Ÿä¸Šæ‰‹ï¼Œå¤åˆ¶å³ç”¨
   â†“
07-complete-types-examplemd â”€â”€â†’ ğŸŒŸ å®Œæ•´åŠŸèƒ½æ¼”ç¤ºï¼ˆå¼ºçƒˆæ¨èï¼‰
   â†“
02-core-concepts.md â”€â”€â†’ ç†è§£è®¾è®¡ç†å¿µå’Œæ ¸å¿ƒæ¦‚å¿µ
   â†“
03-practical-guide.md â†’ æŒ‰ä»»åŠ¡æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆ
   â†“
04-language-reference.md â†’ æŸ¥é˜…ç±»å‹å’Œè¯­æ³•
   â†“
05-functions-reference.md â†’ æŸ¥é˜…å‡½æ•°
```

### æŒ‰ç”¨æˆ·è§’è‰²

| æˆ‘æ˜¯... | æ¨èé˜…è¯» |
|---------|---------|
| **WPL æ–°æ‰‹** | [01-quickstart.md](./01-quickstart.md) â†’ [02-core-concepts.md](./02-core-concepts.md) |
| **æ—¥å¸¸ä½¿ç”¨è€…** | [03-practical-guide.md](./03-practical-guide.md) - æŒ‰ä»»åŠ¡æŸ¥æ‰¾ |
| **å¼€å‘è€…/é›†æˆ** | [04-language-reference.md](./04-language-reference.md) + [05-functions-reference.md](./05-functions-reference.md) |
| **ç¼–è¯‘å™¨å¼€å‘** | [06-grammar-reference.md](./06-grammar-reference.md) - EBNF è¯­æ³• |

### æŒ‰ä»»åŠ¡æŸ¥æ‰¾

| æˆ‘æƒ³... | æŸ¥çœ‹æ–‡æ¡£ |
|---------|---------|
| ğŸš€ å¿«é€Ÿä¸Šæ‰‹ | [01-quickstart.md](./01-quickstart.md) |
| ğŸ¯ **æŸ¥çœ‹å®Œæ•´ç±»å‹ç¤ºä¾‹** | **[07-complete-types-example.md](./07-complete-types-example.md)** |
| ğŸ’¡ ç†è§£æ¦‚å¿µ | [02-core-concepts.md](./02-core-concepts.md) |
| ğŸ“ è§£æ Nginx æ—¥å¿— | [03-practical-guide.md Â§ 1](./03-practical-guide.md#1-è§£æ-web-æœåŠ¡å™¨æ—¥å¿—) |
| ğŸ“Š è§£æ JSON æ•°æ® | [03-practical-guide.md Â§ 2](./03-practical-guide.md#2-è§£æ-json-æ•°æ®) |
| ğŸ”‘ è§£æ KV é”®å€¼å¯¹ | [03-practical-guide.md Â§ 3](./03-practical-guide.md#3-è§£æ-kv-é”®å€¼å¯¹) |
| ğŸ” å¤„ç† Base64 ç¼–ç  | [03-practical-guide.md Â§ 4](./03-practical-guide.md#4-å¤„ç†ç¼–ç æ•°æ®) |
| âœ… éªŒè¯å­—æ®µ | [03-practical-guide.md Â§ 5](./03-practical-guide.md#5-å­—æ®µéªŒè¯ä¸è¿‡æ»¤) |
| ğŸ” æŸ¥æŸä¸ªç±»å‹ | [04-language-reference.md Â§ ç±»å‹ç³»ç»Ÿ](./04-language-reference.md#ğŸ“‹-ç±»å‹ç³»ç»Ÿ) |
| âš™ï¸ æŸ¥æŸä¸ªå‡½æ•° | [05-functions-reference.md](./05-functions-reference.md) |
| ğŸ“– æŸ¥è¯­æ³•è§„åˆ™ | [06-grammar-reference.md](./06-grammar-reference.md) |

---

## ğŸ“– æ–‡æ¡£åˆ—è¡¨

| æ–‡æ¡£ | å†…å®¹ | é€‚åˆäººç¾¤ |
|------|------|---------|
| [01-quickstart.md](./01-quickstart.md) | 5 åˆ†é’Ÿå¿«é€Ÿå…¥é—¨ + 3 ä¸ªæœ€å¸¸ç”¨åœºæ™¯ + ç»ƒä¹  | æ‰€æœ‰äºº |
| **[07-complete-types-example.md](./07-complete-types-example.md)** | **å®Œæ•´ç±»å‹ç³»ç»Ÿç¤ºä¾‹ - 23 ç§ç±»å‹é€ŸæŸ¥** | **æ‰€æœ‰äºº** |
| [02-core-concepts.md](./02-core-concepts.md) | è®¾è®¡ç†å¿µ + ç±»å‹ç³»ç»Ÿ + åŒ¹é…è¯­ä¹‰ + ç®¡é“ç³»ç»Ÿ | æƒ³æ·±å…¥ç†è§£çš„ç”¨æˆ· |
| [03-practical-guide.md](./03-practical-guide.md) | æŒ‰ä»»åŠ¡ç»„ç»‡çš„å®æˆ˜ç¤ºä¾‹ + å¸¸è§é—®é¢˜ | æ—¥å¸¸ä½¿ç”¨è€… |
| [04-language-reference.md](./04-language-reference.md) | å®Œæ•´ç±»å‹åˆ—è¡¨ + è¯­æ³•å…ƒç´  + é€ŸæŸ¥è¡¨ | å¼€å‘è€… |
| [05-functions-reference.md](./05-functions-reference.md) | æ‰€æœ‰å‡½æ•°çš„æ ‡å‡†åŒ–å‚è€ƒ | å¼€å‘è€… |
| [06-grammar-reference.md](./06-grammar-reference.md) | EBNF å½¢å¼åŒ–è¯­æ³•å®šä¹‰ | ç¼–è¯‘å™¨å¼€å‘è€… |

---

## âš¡ å¿«é€Ÿç¤ºä¾‹

### Nginx è®¿é—®æ—¥å¿—

```wpl
package nginx {
  rule access_log {
    (
      ip:client_ip,
      2*_,
      time/clf<[,]>:time,
      http/request":request,
      digit:status,
      digit:bytes
    )
  }
}
```

### JSON API å“åº”

```wpl
package api {
  rule response {
    (json(
      chars@user,
      digit@code,
      chars@message
    ))
  }
}
```

### åä¸ºé˜²ç«å¢™æ—¥å¿—ï¼ˆBase64ï¼‰

```wpl
package firewall {
  rule huawei_log {
    |decode/base64|
    (
      digit:id,
      time:timestamp,
      sn:serial,
      chars:type\:,
      opt(kvarr),
      kvarr
    )
  }
}
```

æ›´å¤šç¤ºä¾‹è¯·æŸ¥çœ‹ï¼š[01-quickstart.md](./01-quickstart.md) å’Œ [03-practical-guide.md](./03-practical-guide.md)

---

## ğŸ¯ å®Œæ•´ç±»å‹ç³»ç»Ÿç¤ºä¾‹

**æƒ³å¿«é€Ÿäº†è§£ WPL æ”¯æŒçš„æ‰€æœ‰æ•°æ®ç±»å‹ï¼Ÿ**

ğŸ‘‰ **[æŸ¥çœ‹å®Œæ•´ç±»å‹ç¤ºä¾‹](./07-complete-types-example.md)** - ä¸€ä¸ªç¤ºä¾‹å±•ç¤º 23 ç§ä¸»è¦æ•°æ®ç±»å‹

è¯¥æ–‡æ¡£åŒ…å«ï¼š
- âœ… **å®Œæ•´å¯è¿è¡Œ**çš„è¾“å…¥æ•°æ® + WPL è§„åˆ™ + è¾“å‡ºç»“æœ
- âœ… **23 ç§ç±»å‹**ï¼šåŸºç¡€ã€æ—¶é—´ã€ç½‘ç»œã€ç»“æ„åŒ–ã€åè®®ã€ç¼–ç 
- âœ… **æ¯ç§ç±»å‹è¯¦è§£**ï¼šè¯­æ³•ã€ç¤ºä¾‹ã€ä½¿ç”¨åœºæ™¯
- âœ… **å¸¸è§ç»„åˆæ¨¡å¼**ï¼šå¤åˆ¶å³ç”¨çš„ç±»å‹ç»„åˆ

**é€‚åˆï¼š**
- ğŸ†• æ–°æ‰‹å¿«é€Ÿäº†è§£ WPL èƒ½åŠ›
- ğŸ“š å¼€å‘è€…ä½œä¸ºç±»å‹é€ŸæŸ¥æ‰‹å†Œ
- ğŸ” é‡åˆ°é™Œç”Ÿæ•°æ®æ ¼å¼æ—¶å¿«é€ŸæŸ¥æ‰¾å¯¹åº”ç±»å‹

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **å£°æ˜å¼**ï¼šæè¿°"æ˜¯ä»€ä¹ˆ"ï¼Œè€Œé"æ€ä¹ˆåš"
- **ç±»å‹å®‰å…¨**ï¼šè‡ªåŠ¨éªŒè¯å’Œè½¬æ¢ï¼ˆIPã€æ—¶é—´ã€JSON ç­‰ï¼‰
- **ç»„åˆæ€§**ï¼šå°è§„åˆ™ç»„åˆæˆå¤æ‚è§„åˆ™
- **å¼ºå¤§çš„ç®¡é“**ï¼šé¢„å¤„ç†ï¼ˆBase64/Hex è§£ç ï¼‰+ å­—æ®µçº§éªŒè¯
- **çµæ´»çš„åŒ¹é…**ï¼šé¡ºåºã€æ‹©ä¸€ã€å¯é€‰ã€é‡å¤
- **å­å­—æ®µæå–**ï¼šJSON/KV åµŒå¥—å­—æ®µ

---

## ğŸ’¬ å¿«é€Ÿå¸®åŠ©

### å¸¸è§é—®é¢˜

**Q: ä»å“ªé‡Œå¼€å§‹å­¦ä¹ ï¼Ÿ**
A: ä» [01-quickstart.md](./01-quickstart.md) å¼€å§‹ï¼Œ5 åˆ†é’Ÿå³å¯ä¸Šæ‰‹ã€‚

**Q: å¦‚ä½•è§£ææˆ‘çš„æ—¥å¿—æ ¼å¼ï¼Ÿ**
A: æŸ¥çœ‹ [03-practical-guide.md](./03-practical-guide.md)ï¼Œæ‰¾åˆ°ç›¸ä¼¼çš„åœºæ™¯å¹¶è°ƒæ•´ã€‚

**Q: æŸä¸ªç±»å‹/å‡½æ•°æ€ä¹ˆç”¨ï¼Ÿ**
A: æŸ¥çœ‹ [04-language-reference.md](./04-language-reference.md) æˆ– [05-functions-reference.md](./05-functions-reference.md)ã€‚

**Q: è§£æå¤±è´¥æ€ä¹ˆè°ƒè¯•ï¼Ÿ**
A: å‚è€ƒ [01-quickstart.md Â§ è°ƒè¯•æŠ€å·§](./01-quickstart.md#å¿«é€Ÿè°ƒè¯•æŠ€å·§) æˆ– [03-practical-guide.md Â§ å¸¸è§é—®é¢˜](./03-practical-guide.md#7-å¸¸è§é—®é¢˜)ã€‚

---

**å¼€å§‹å­¦ä¹ ï¼š** [01-quickstart.md](./01-quickstart.md) - 5åˆ†é’Ÿå¿«é€Ÿå…¥é—¨